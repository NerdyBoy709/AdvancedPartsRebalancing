@PART[fft-fusion-reactor-25-1|fft-fusion-reactor-375-1]:AFTER[Kerbalism]
{
	!MODULE[FusionReactor],* {}
}

@PART[fft-fusion-reactor-25-1]:NEEDS[FarFutureTechnologies,Kerbalism]
{
	@tags ^= :$: _kerbalism
	
	// = = Kerbalism = =
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = He3 Breeder Reactor
		StartActionName = Start He3 Breeder Reactor
		StopActionName = Stop He3 Breeder Reactor
		ToggleActionName = Toggle He3 Breeder Reactor

		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = He3BreederReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000
		@systemPower *= 4
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1			
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdDeuterium
			Ratio = 0.000000109
			@Ratio *= 4
			FlowMode = STAGE_PRIORITY_FLOW
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.00000002725
			@Ratio *= 4
			DumpExcess = False
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdTritium
			Ratio = 0.00000002725
			@Ratio *= 4
			DumpExcess = False
			FlowMode = ALL_VESSEL
		}	
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 4
			DumpExcess = True			
			FlowMode = ALL_VESSEL
		}
	}
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = He3 Fusion Reactor
		StartActionName = Start He3 Fusion Reactor
		StopActionName = Stop He3 Fusion Reactor
		ToggleActionName = Toggle He3 Fusion Reactor
		
		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = He3FusionReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000	
		@systemPower *= 18.4
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1			
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdDeuterium
			Ratio = 0.00000545
			@Ratio *= 18.4
			FlowMode = ALL_VESSEL
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.0000654
			@Ratio *= 18.4
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0000654
			@Ratio *= 18.4
			DumpExcess = True
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 18.4
			DumpExcess = False			
			FlowMode = ALL_VESSEL
		}
	}
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = 2He3 Fusion Reactor
		StartActionName = Start 2He3 Fusion Reactor
		StopActionName = Stop 2He3 Fusion Reactor
		ToggleActionName = Toggle 2He3 Fusion Reactor
		
		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = 2He3FusionReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000	
		@systemPower *= 12.9
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.0001308
			@Ratio *= 12.9
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0001308
			@Ratio *= 12.9
			DumpExcess = True
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 12.9
			DumpExcess = False			
			FlowMode = ALL_VESSEL
		}		
	}
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = Tritium Fusion Reactor
		StartActionName = Start Tritium Fusion Reactor
		StopActionName = Stop Tritium Fusion Reactor
		ToggleActionName = Toggle Tritium Fusion Reactor
		
		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = TritiumFusionReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000	
		@systemPower *= 17.6
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdTritium
			Ratio = 0.000654
			@Ratio *= 17.6
			FlowMode = ALL_VESSEL
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdDeuterium
			Ratio = 0.0000545
			@Ratio *= 17.6
			FlowMode = ALL_VESSEL
		}		
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.000654
			@Ratio *= 17.6
			DumpExcess = True			
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 17.6	
			DumpExcess = False		
			FlowMode = ALL_VESSEL
		}	
	}
	MODULE
	{
		name = Configure
		title = FFT Fusion Reactor
		slots = 1
		reconfigure = engineer@5
		SETUP
		{
			name = He3 Breeder Reactor
			desc = He3 Breeder Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = He3BreederReactor
			}
		}
		SETUP
		{
			name = He3 Fusion Reactor
			desc = He3 Fusion Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = He3FusionReactor
			}
		}
		SETUP
		{
			name = 2He3 Fusion Reactor
			desc = 2He3 Fusion Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = 2He3FusionReactor
			}
		}
		SETUP
		{
			name = Tritium Fusion Reactor
			desc = Tritium Fusion Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = TritiumFusionReactor
			}
		}		
	}
	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = SystemHeatConverterKerbalism
		title = Fusion Reactor
		repair = Engineer
		mtbf = 725760000
		extra_cost = 2.0
		extra_mass = 0.4
	}	
}

@PART[fft-fusion-reactor-375-1]:NEEDS[FarFutureTechnologies,Kerbalism]:AFTER[FarFutureTechnologies]
{
	@tags ^= :$: _kerbalism
	
	// = = Kerbalism = =
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = He3 Breeder Reactor
		StartActionName = Start He3 Breeder Reactor
		StopActionName = Stop He3 Breeder Reactor
		ToggleActionName = Toggle He3 Breeder Reactor
		
		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = He3BreederReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000	
		@systemPower *= 10.0
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdDeuterium
			Ratio = 0.000000109
			@Ratio *= 10.0
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.00000002725
			@Ratio *= 10.0
			DumpExcess = False
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdTritium
			Ratio = 0.00000002725
			@Ratio *= 10.0
			DumpExcess = False
			FlowMode = ALL_VESSEL
		}	
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 10.0
			DumpExcess = True		
			FlowMode = ALL_VESSEL
		}	
	}
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = He3 Fusion Reactor
		StartActionName = Start He3 Fusion Reactor
		StopActionName = Stop He3 Fusion Reactor
		ToggleActionName = Toggle He3 Fusion Reactor
		
		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = He3FusionReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000	
		@systemPower *= 46.0
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1			
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdDeuterium
			Ratio = 0.00000545
			@Ratio *= 46.0
			FlowMode = ALL_VESSEL
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.0000654
			@Ratio *= 46.0
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0000654
			@Ratio *= 46.0
			DumpExcess = True
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 46.0
			DumpExcess = False		
			FlowMode = ALL_VESSEL
		}
	}
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = 2He3 Fusion Reactor
		StartActionName = Start 2He3 Fusion Reactor
		StopActionName = Stop 2He3 Fusion Reactor
		ToggleActionName = Toggle 2He3 Fusion Reactor
		
		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = 2He3FusionReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000	
		@systemPower *= 32.25
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.0001308
			@Ratio *= 32.25
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0001308
			@Ratio *= 32.25
			DumpExcess = True
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 32.25
			DumpExcess = False	
			FlowMode = ALL_VESSEL
		}		
	}
	MODULE
	{
		name = SystemHeatConverterKerbalism
		ConverterName = Tritium Fusion Reactor
		StartActionName = Start Tritium Fusion Reactor
		StopActionName = Stop Tritium Fusion Reactor
		ToggleActionName = Toggle Tritium Fusion Reactor
		
		FillAmount = 1
		AutoShutdown = true
		GeneratesHeat = false
		UseSpecialistBonus = false
		moduleID = TritiumFusionReactor
		systemHeatModuleID = isru
		shutdownTemperature = 2000
		systemOutletTemperature = 1600
		systemPower = 1000	
		@systemPower *= 44.0
		systemEfficiency
		{
			key = 0.0 0
			key = 650 0.1
			key = 1100 0.4
			key = 1300 0.8
			key = 1600 1.0
			key = 2000 0.1
			key = 3000 0.0
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdTritium
			Ratio = 0.0000654
			@Ratio *= 44.0
			FlowMode = ALL_VESSEL
		}
		INPUT_RESOURCE
		{
			ResourceName = LqdDeuterium
			Ratio = 0.00000545
			@Ratio *= 44.0
			FlowMode = ALL_VESSEL
		}		
		OUTPUT_RESOURCE
		{
			ResourceName = LqdHe3
			Ratio = 0.0000654
			@Ratio *= 44.0
			DumpExcess = True
			FlowMode = ALL_VESSEL
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1000
			@Ratio *= 44.0
			DumpExcess = False	
			FlowMode = ALL_VESSEL
		}		
	}
	MODULE
	{
		name = Configure
		title = FFT Fusion Reactor
		slots = 1
		reconfigure = engineer@5
		SETUP
		{
			name = He3 Breeder Reactor
			desc = He3 Breeder Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = He3BreederReactor
			}
		}
		SETUP
		{
			name = He3 Fusion Reactor
			desc = He3 Fusion Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = He3FusionReactor
			}
		}
		SETUP
		{
			name = 2He3 Fusion Reactor
			desc = 2He3 Fusion Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = 2He3FusionReactor
			}
		}
		SETUP
		{
			name = Tritium Fusion Reactor
			desc = Tritium Fusion Reactor
			MODULE
			{
				type = SystemHeatConverterKerbalism
				id_field = moduleID
				id_value = TritiumFusionReactor
			}
		}
	}
	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = SystemHeatConverterKerbalism
		title = Fusion Reactor
		repair = Engineer
		mtbf = 725760000
		extra_cost = 2.0
		extra_mass = 0.4
	}
}
